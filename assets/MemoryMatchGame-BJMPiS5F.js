import{a as F,r as o,u as A,j as e,S as G,L as Y,t as T,f as _}from"./index-BGlGTwyI.js";const p=[{id:1,type:"image",content:"/assets/boy-logo.png",alt:"Boy"},{id:2,type:"image",content:"/assets/brokid-logo.png",alt:"Brokid"},{id:3,type:"image",content:"/assets/boy_face.png",alt:"Merchboy"},{id:4,type:"image",content:"/assets/merchboy_cat.png",alt:"Cat Hat"},{id:5,type:"image",content:"/assets/merchboy_bunny.png",alt:"Bunny Hat"},{id:6,type:"image",content:"/assets/merchboy_money.png",alt:"Money Face"},{id:7,type:"emoji",content:"â­ï¸"},{id:8,type:"emoji",content:"ðŸ”"}],N=()=>{const{updateStat:r,addCoins:x,userProfile:k,stats:f}=F()||{},[a,M]=o.useState([]),[g,d]=o.useState([]),[l,y]=o.useState([]),[w,c]=o.useState(!1),[u,b]=o.useState(0),[S,j]=o.useState(0),[h,C]=o.useState(parseInt(localStorage.getItem("memoryHighScore"))||0);o.useEffect(()=>{f?.memoryHighScore>h&&C(f.memoryHighScore)},[f]);const{playBeep:R,playCollect:z,playWin:H}=A(),v=()=>{const s=[...p,...p].sort(()=>Math.random()-.5).map((n,m)=>({...n,uid:m}));M(s),d([]),y([]),b(0),j(0),c(!1)};o.useEffect(()=>{v()},[]);const I=([t,s])=>{const n=a.find(i=>i.uid===t),m=a.find(i=>i.uid===s);if(n.id===m.id){if(y(i=>[...i,n.id]),d([]),c(!1),b(i=>i+100),z(),navigator.vibrate&&navigator.vibrate([30,50,30]),l.length+1===p.length){H(),T();const i=u+100+Math.max(0,50-S)*10;if(i>h){C(i),r&&r("memoryHighScore",i);const E=k?.name||"Mind Master";_.publish(`solved the Memory Matrix with ${i} points! ðŸ§ `,"win",E)}r&&r("gamesPlayed","memory_match"),x&&x(50)}}else setTimeout(()=>{d([]),c(!1)},1e3)},B=t=>{if(w||g.includes(t)||l.includes(a.find(n=>n.uid===t).id))return;const s=[...g,t];d(s),R(),navigator.vibrate&&navigator.vibrate(5),s.length===2&&(c(!0),j(n=>n+1),I(s))};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",color:"#ffff00"},children:[e.jsx("h1",{style:{fontFamily:'"Courier New", monospace',fontSize:"3rem",margin:"10px 0"},children:"MEMORY MATCH"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"500px",marginBottom:"20px",fontSize:"1.5rem",fontWeight:"bold"},children:[e.jsxs("span",{children:["MOVES: ",S]}),e.jsxs("span",{children:["SCORE: ",u]}),e.jsxs("span",{children:["HIGH: ",h]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",padding:"20px",backgroundColor:"#1a1a2e",borderRadius:"15px",border:"4px solid #ffff00"},children:a.map(t=>{const s=g.includes(t.uid)||l.includes(t.id);return e.jsx("div",{onClick:()=>B(t.uid),style:{width:"100px",height:"100px",perspective:"1000px",cursor:"pointer"},children:e.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",transition:"transform 0.6s",transformStyle:"preserve-3d",transform:s?"rotateY(180deg)":"rotateY(0deg)"},children:[e.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",backgroundColor:"#333",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #555"},children:e.jsx("span",{style:{fontSize:"2rem",color:"#777"},children:"?"})}),e.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",backgroundColor:"#fff",borderRadius:"10px",transform:"rotateY(180deg)",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #ffff00"},children:t.type==="image"?e.jsx("img",{src:t.content,alt:t.alt,style:{width:"80%",height:"80%",objectFit:"contain"}}):e.jsx("span",{style:{fontSize:"3rem"},children:t.content})})]})},t.uid)})}),l.length===p.length&&e.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(0, 0, 0, 0.9)",padding:"40px",borderRadius:"20px",border:"4px solid #ffff00",textAlign:"center",zIndex:100},children:[e.jsx("h2",{style:{fontSize:"3rem",color:"#ffff00",margin:"0 0 20px 0"},children:"YOU WIN!"}),e.jsx("p",{style:{fontSize:"1.5rem",marginBottom:"30px",color:"white"},children:"Great Job!"}),e.jsx(G,{onClick:v,style:{padding:"10px 20px",fontSize:"1.2rem",backgroundColor:"#ffff00",color:"black",border:"none",borderRadius:"5px",marginRight:"15px",fontWeight:"bold"},children:"PLAY AGAIN"}),e.jsx(Y,{to:"/arcade",style:{padding:"10px 20px",fontSize:"1.2rem",backgroundColor:"#333",color:"white",textDecoration:"none",borderRadius:"5px"},children:"EXIT"})]}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsx("img",{src:"/assets/brokid-logo.png",alt:"Brokid",style:{width:"150px",opacity:.6}})})]})};export{N as default};
