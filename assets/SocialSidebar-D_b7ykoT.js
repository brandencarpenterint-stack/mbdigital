import{b as y,g as u,r as s,j as e,L as v,s as h}from"./index-DKzGAutY.js";const w=()=>{const{userProfile:a,setViewedProfile:g}=y(),{showToast:f}=u(),[i,d]=s.useState(!1),[n,b]=s.useState([]),[o,c]=s.useState(!1);s.useEffect(()=>{const t=async()=>{if(!(!h||!i)){c(!0);try{const l=new Date(Date.now()-3e5).toISOString(),{data:x,error:j}=await h.from("profiles").select("id, display_name, avatar_url, last_seen, coins, achievements, stats, placedStickers").gt("last_seen",l).neq("display_name",a?.name).order("last_seen",{ascending:!1}).limit(20);x&&b(x)}catch(l){console.error("Error fetching users:",l)}finally{c(!1)}}};t();const r=setInterval(t,3e4);return()=>clearInterval(r)},[i,a]);const m=t=>{f(`Challenge sent to ${t.display_name}! âš”ï¸`,"success")},p=t=>{const r={name:t.display_name,avatar:t.avatar_url,code:"UNKNOWN",stats:t.stats||{},achievements:t.achievements||[],placedStickers:t.placedStickers||[]};g(r)};return e.jsxs(e.Fragment,{children:[!i&&e.jsxs("button",{onClick:()=>d(!0),style:{position:"fixed",top:"80px",right:"0",zIndex:998,background:"rgba(0,0,0,0.6)",border:"1px solid var(--neon-blue)",borderRight:"none",borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px",padding:"10px 15px",color:"var(--neon-blue)",cursor:"pointer",backdropFilter:"blur(5px)",boxShadow:"-5px 0 15px rgba(0,0,0,0.5)",display:"flex",alignItems:"center",gap:"10px",transition:"transform 0.2s"},onMouseEnter:t=>t.currentTarget.style.transform="translateX(-5px)",onMouseLeave:t=>t.currentTarget.style.transform="translateX(0)",children:[e.jsx("div",{style:{width:"10px",height:"10px",background:"#00ff00",borderRadius:"50%",boxShadow:"0 0 5px #00ff00"}}),e.jsx("span",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"SQUAD"})]}),e.jsxs("div",{style:{position:"fixed",top:"60px",right:i?"0":"-300px",width:"280px",height:"calc(100vh - 60px - 70px)",background:"rgba(10, 10, 20, 0.85)",backdropFilter:"blur(15px)",borderLeft:"1px solid rgba(255, 255, 255, 0.1)",zIndex:999,transition:"right 0.3s cubic-bezier(0.16, 1, 0.3, 1)",display:"flex",flexDirection:"column",boxShadow:i?"-10px 0 30px rgba(0,0,0,0.5)":"none"},children:[e.jsxs("div",{style:{padding:"15px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"1.2rem"},children:"ðŸŒ"}),e.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"white",letterSpacing:"1px"},children:"ONLINE PLAZA"})]}),e.jsx("button",{onClick:()=>d(!1),style:{background:"transparent",border:"none",color:"#666",cursor:"pointer",fontSize:"1.2rem",padding:"5px"},children:"âœ–"})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"15px",display:"flex",flexDirection:"column",gap:"10px"},children:[o&&n.length===0&&e.jsx("div",{style:{textAlign:"center",color:"#666",padding:"20px"},children:"Scanning frequency..."}),!o&&n.length===0&&e.jsxs("div",{style:{textAlign:"center",opacity:.5,marginTop:"20px"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px"},children:"ðŸ“¡"}),e.jsx("div",{children:"No other operators online."}),e.jsx("div",{style:{fontSize:"0.8rem",marginTop:"5px"},children:"It's quiet... too quiet."})]}),n.map(t=>e.jsxs("div",{className:"glass-panel",style:{padding:"10px",display:"flex",alignItems:"center",gap:"10px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",transition:"all 0.2s",cursor:"pointer"},onClick:()=>p(t),children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",overflow:"hidden",border:"2px solid var(--neon-blue)"},children:e.jsx("img",{src:t.avatar_url||"/assets/merchboy_face.png",style:{width:"100%",height:"100%",objectFit:"cover"},onError:r=>r.target.src="/assets/merchboy_face.png"})}),e.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:"8px",height:"8px",background:"#00ff00",borderRadius:"50%",border:"1px solid black"}})]}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:"bold",color:"white",fontSize:"0.9rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.display_name}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"#aaa"},children:["ðŸ’° ",t.coins?.toLocaleString()||0]})]}),e.jsx("div",{style:{display:"flex",gap:"5px"},children:e.jsx("button",{onClick:r=>{r.stopPropagation(),m(t)},title:"Challenge",style:{background:"var(--neon-pink)",border:"none",borderRadius:"5px",width:"24px",height:"24px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",color:"white"},children:"âš”ï¸"})})]},t.id)),n.length===0&&!o&&e.jsxs("div",{style:{marginTop:"20px",borderTop:"1px dashed #333",paddingTop:"10px"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#444",textAlign:"center",marginBottom:"10px"},children:"OFFLINE SIMULATION"}),e.jsxs("div",{className:"glass-panel",style:{padding:"10px",display:"flex",alignItems:"center",gap:"10px",opacity:.8,cursor:"pointer"},onClick:()=>p({display_name:"Bot_Alpha",avatar_url:null}),children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#333"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.9rem",color:"#666"},children:"Bot_Alpha"}),e.jsx("div",{style:{fontSize:"0.7rem",color:"#444"},children:"AFK"})]})]})]})]}),e.jsx("div",{style:{padding:"15px",borderTop:"1px solid rgba(255,255,255,0.1)",textAlign:"center"},children:e.jsx(v,{to:"/profile",style:{color:"var(--neon-blue)",textDecoration:"none",fontSize:"0.8rem",fontWeight:"bold",letterSpacing:"1px"},children:"MY BRO CARD ðŸ†”"})})]})]})};export{w as default};
