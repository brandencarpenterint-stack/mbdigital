import{r as f,j as s,L as P,m as q,S as H}from"./index-DKzGAutY.js";const z=({audioCtx:p,isPlaying:v})=>{const m=f.useRef(null),b=f.useRef(null),d=f.useRef(null),V=f.useRef(null);f.useEffect(()=>{if(!(!p||!p.current)&&!b.current){const u=p.current.createAnalyser();u.fftSize=64,b.current=u}},[p]);const g=()=>{const u=m.current;if(!u)return;const o=u.getContext("2d"),y=b.current;if(y){const x=y.frequencyBinCount;d.current||(d.current=new Uint8Array(x)),y.getByteFrequencyData(d.current)}else d.current||(d.current=new Uint8Array(32).fill(0));o.fillStyle="#000",o.fillRect(0,0,u.width,u.height);const c=u.width/32*2.5;let h,T=0;for(let x=0;x<32;x++){let A=d.current?d.current[x]:0;v&&!b.current&&(A=Math.random()*200),h=A/2,o.fillStyle=`rgb(${A+100}, 50, 255)`,o.fillRect(T,u.height-h,c,h),T+=c+2}o.fillStyle="rgba(255, 255, 255, 0.05)",o.fillRect(0,Date.now()/5%u.height,u.width,2),V.current=requestAnimationFrame(g)};return f.useEffect(()=>(g(),()=>cancelAnimationFrame(V.current)),[v]),s.jsx("div",{style:{border:"4px solid #333",borderRadius:"10px",overflow:"hidden",background:"#000",boxShadow:"0 0 20px rgba(0,0,0,0.5)",marginBottom:"20px"},children:s.jsx("canvas",{ref:m,width:300,height:100,style:{width:"100%",height:"100px",display:"block"}})})},M=()=>{const[p,v]=f.useState(!1),[m,b]=f.useState(128),[d,V]=f.useState(0),[g,u]=f.useState("retro"),[o,y]=f.useState({kick:Array(16).fill(!1),snare:Array(16).fill(!1),hihat:Array(16).fill(!1),bass:Array(16).fill(!1),fx:Array(16).fill(!1)}),c=f.useRef(null),h=f.useRef(null),T=f.useRef(null),x=f.useRef(0),A={MUSHROOM:{kick:[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1],snare:[!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1],hihat:[!0,!0,!1,!0,!0,!0,!1,!0,!0,!0,!1,!0,!0,!0,!1,!0],bass:[!0,!0,!1,!0,!1,!1,!0,!1,!0,!0,!1,!0,!1,!1,!0,!1],fx:[!0,!1,!1,!0,!1,!1,!0,!1,!0,!1,!1,!0,!1,!1,!0,!1]},SPEEDSTER:{kick:[!0,!1,!1,!0,!1,!1,!0,!1,!0,!1,!1,!0,!1,!1,!0,!1],snare:[!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1],hihat:[!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1],bass:[!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1],fx:[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!0]},HERO:{kick:[!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1],snare:[!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0],hihat:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],bass:[!0,!0,!0,!0,!1,!1,!0,!0,!0,!0,!0,!0,!1,!1,!0,!0],fx:[!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1]}},O=()=>{if(!c.current){const t=window.AudioContext||window.webkitAudioContext;c.current=new t,h.current=c.current.createAnalyser(),h.current.connect(c.current.destination)}c.current.state==="suspended"&&c.current.resume()},R=(t,r=0)=>{if(!c.current)return;const i=c.current,e=r||i.currentTime,l=h.current||i.destination,a=i.createOscillator(),n=i.createGain();if(a.connect(n),n.connect(l),g==="8bit")if(t==="kick")a.type="square",a.frequency.setValueAtTime(100,e),a.frequency.exponentialRampToValueAtTime(10,e+.1),n.gain.setValueAtTime(.5,e),n.gain.exponentialRampToValueAtTime(.01,e+.1),a.start(e),a.stop(e+.1);else if(t==="snare"){const k=i.createOscillator();k.type="sawtooth",k.frequency.setValueAtTime(400,e),k.connect(n),k.start(e),k.stop(e+.1),n.gain.setValueAtTime(.4,e),n.gain.linearRampToValueAtTime(.01,e+.1)}else t==="hihat"?(a.type="square",a.frequency.setValueAtTime(2e3,e),n.gain.setValueAtTime(.1,e),n.gain.exponentialRampToValueAtTime(.01,e+.05),a.start(e),a.stop(e+.05)):t==="bass"?(a.type="triangle",a.frequency.setValueAtTime(110,e),a.frequency.setValueAtTime(55,e+.1),n.gain.setValueAtTime(.6,e),n.gain.linearRampToValueAtTime(.01,e+.4),a.start(e),a.stop(e+.4)):t==="fx"&&(a.type="square",a.frequency.setValueAtTime(900,e),a.frequency.setValueAtTime(1200,e+.05),n.gain.setValueAtTime(.2,e),n.gain.linearRampToValueAtTime(.01,e+.3),a.start(e),a.stop(e+.3));else g==="trap"?t==="kick"?(a.type="sine",a.frequency.setValueAtTime(60,e),a.frequency.exponentialRampToValueAtTime(30,e+.4),n.gain.setValueAtTime(1,e),n.gain.exponentialRampToValueAtTime(.01,e+.4),a.start(e),a.stop(e+.4)):t==="snare"?(a.type="triangle",a.frequency.setValueAtTime(200,e),n.gain.setValueAtTime(.8,e),n.gain.exponentialRampToValueAtTime(.01,e+.1),a.start(e),a.stop(e+.1)):t==="bass"?(a.type="sine",a.frequency.setValueAtTime(40,e),n.gain.setValueAtTime(.8,e),n.gain.linearRampToValueAtTime(.01,e+.8),a.start(e),a.stop(e+.8)):E(t,e,l):E(t,e,l)},E=(t,r,i)=>{const e=c.current,l=e.createOscillator(),a=e.createGain();switch(l.connect(a),a.connect(i),t){case"kick":l.frequency.setValueAtTime(150,r),l.frequency.exponentialRampToValueAtTime(.01,r+.5),a.gain.setValueAtTime(.8,r),a.gain.exponentialRampToValueAtTime(.01,r+.5),l.start(r),l.stop(r+.5);break;case"snare":l.type="triangle",l.frequency.setValueAtTime(250,r),a.gain.setValueAtTime(.7,r),a.gain.exponentialRampToValueAtTime(.01,r+.2),l.start(r),l.stop(r+.2);break;case"hihat":l.type="square",l.frequency.setValueAtTime(8e3,r),a.gain.setValueAtTime(.1,r),a.gain.exponentialRampToValueAtTime(.01,r+.05),l.start(r),l.stop(r+.05);break;case"bass":l.type="sawtooth",l.frequency.setValueAtTime(80,r);const n=e.createBiquadFilter();n.type="lowpass",n.frequency.value=600,l.disconnect(),l.connect(n),n.connect(a),a.gain.setValueAtTime(.6,r),a.gain.linearRampToValueAtTime(.01,r+.4),l.start(r),l.stop(r+.4);break;case"fx":l.type="sawtooth",l.frequency.setValueAtTime(150,r),l.frequency.exponentialRampToValueAtTime(50,r+.3),a.gain.setValueAtTime(.5,r),a.gain.exponentialRampToValueAtTime(.01,r+.3),l.start(r),l.stop(r+.3);break}};f.useEffect(()=>(p?(x.current=d,T.current=setInterval(()=>{const t=(x.current+1)%16;x.current=t,V(t),B(t)},60/m*1e3/4)):clearInterval(T.current),()=>clearInterval(T.current)),[p,m,g]);const C=f.useRef(o);f.useEffect(()=>{C.current=o},[o]);const B=t=>{const r=C.current;r.kick[t]&&R("kick"),r.snare[t]&&R("snare"),r.hihat[t]&&R("hihat"),r.bass[t]&&R("bass"),r.fx[t]&&R("fx")},I=(t,r)=>{const i={...o};i[t][r]=!i[t][r],y(i),navigator.vibrate&&navigator.vibrate(5)},j=t=>{A[t]&&(y(A[t]),t==="MUSHROOM"||t==="SPEEDSTER"?u("8bit"):t==="HERO"&&u("retro"))},w=()=>{y({kick:Array(16).fill(!1),snare:Array(16).fill(!1),hihat:Array(16).fill(!1),bass:Array(16).fill(!1),fx:Array(16).fill(!1)})},N=()=>{O(),v(!p)},S={kick:"#ff0055",snare:"#ffcc00",hihat:"#00ccff",bass:"#bf00ff",fx:"#00ff66"};return s.jsxs("div",{className:"page-enter",style:{background:"linear-gradient(to bottom, #050510, #000)",minHeight:"100vh",padding:"20px",paddingBottom:"140px",color:"white",fontFamily:'"Orbitron", sans-serif',textAlign:"center"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px",position:"relative",zIndex:10},children:[s.jsx(P,{to:"/",style:{textDecoration:"none",fontSize:"1.5rem",opacity:.8,color:"white"},children:"â¬…"}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx(q.h1,{animate:{textShadow:["0 0 10px #00ccff","0 0 20px #bf00ff","0 0 10px #00ccff"]},transition:{duration:2,repeat:1/0},style:{fontSize:"1.8rem",color:"#fff",margin:0,letterSpacing:"2px"},children:"BEAT LAB 3.0"}),s.jsx("div",{style:{fontSize:"0.7rem",color:"#666",letterSpacing:"2px"},children:"SONIC ARCHITECTURE"})]}),s.jsx("div",{style:{width:"2rem"}})]}),s.jsx(z,{audioCtx:c,isPlaying:p}),s.jsx("div",{className:"glass-panel",style:{padding:"20px",marginBottom:"20px",background:"rgba(20, 20, 30, 0.6)",border:"1px solid rgba(255,255,255,0.1)",backdropFilter:"blur(10px)"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"20px",alignItems:"center",flexWrap:"wrap"},children:[s.jsx(H,{onClick:N,style:{padding:"15px 40px",fontSize:"1.2rem",background:p?"var(--neon-pink)":"var(--neon-green)",color:"black",border:"none",borderRadius:"50px",fontWeight:"bold",boxShadow:`0 0 20px ${p?"var(--neon-pink)":"var(--neon-green)"}`,minWidth:"150px"},children:p?"HALT â– ":"ENGAGE â–¶"}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[s.jsx("label",{style:{fontSize:"0.7rem",color:"#888",letterSpacing:"1px"},children:"SOUND BANK"}),s.jsxs("select",{value:g,onChange:t=>u(t.target.value),style:{background:"#111",color:"var(--neon-blue)",border:"1px solid var(--neon-blue)",padding:"10px",borderRadius:"5px",fontFamily:"inherit",cursor:"pointer",outline:"none",boxShadow:"0 0 5px var(--neon-blue)"},children:[s.jsx("option",{value:"retro",children:"RETRO WAVE"}),s.jsx("option",{value:"8bit",children:"8-BIT CHIP"}),s.jsx("option",{value:"trap",children:"DEEP TRAP"})]})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[s.jsxs("label",{style:{fontSize:"0.7rem",color:"#888"},children:["TEMPO: ",m," BPM"]}),s.jsx("input",{type:"range",min:"60",max:"180",value:m,onChange:t=>b(parseInt(t.target.value)),style:{accentColor:"var(--neon-pink)",width:"120px"}})]})]})}),s.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",justifyContent:"center",flexWrap:"wrap"},children:[s.jsx("span",{style:{color:"#888",alignSelf:"center",fontSize:"0.8rem"},children:"PRESETS:"}),s.jsx("button",{onClick:()=>j("MUSHROOM"),className:"preset-btn",style:{borderColor:"#e52521",color:"#e52521"},children:"MUSHROOM ðŸ„"}),s.jsx("button",{onClick:()=>j("SPEEDSTER"),className:"preset-btn",style:{borderColor:"#0066cc",color:"#0066cc"},children:"SPEEDSTER ðŸ¦”"}),s.jsx("button",{onClick:()=>j("HERO"),className:"preset-btn",style:{borderColor:"#107a28",color:"#107a28"},children:"HERO ðŸ›¡ï¸"}),s.jsx("button",{onClick:w,className:"preset-btn",style:{borderColor:"#555",color:"#aaa"},children:"CLEAR ðŸ—‘ï¸"})]}),s.jsx("style",{children:`
                .preset-btn {
                    padding: 8px 15px;
                    background: transparent;
                    border: 1px solid;
                    border-radius: 20px;
                    cursor: pointer;
                    font-weight: bold;
                    font-family: inherit;
                    transition: all 0.2s;
                }
                .preset-btn:hover {
                    background: rgba(255,255,255,0.1);
                    transform: scale(1.05);
                }
            `}),s.jsx("div",{className:"glass-panel",style:{padding:"20px",border:"1px solid #333",background:"rgba(0,0,0,0.8)",overflowX:"auto",boxShadow:"inset 0 0 50px rgba(0,0,0,0.8)"},children:Object.keys(o).map(t=>s.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[s.jsx("div",{style:{width:"60px",textAlign:"right",marginRight:"15px",color:S[t],fontWeight:"bold",fontSize:"0.7rem",textShadow:`0 0 5px ${S[t]}`},children:t.toUpperCase()}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(16, 1fr)",gap:"4px",flex:1,minWidth:"350px"},children:o[t].map((r,i)=>s.jsx(q.div,{whileTap:{scale:.8},onClick:()=>I(t,i),style:{aspectRatio:"1/1.5",background:r?S[t]:i%4===0?"#333":"#1a1a1a",borderRadius:"3px",cursor:"pointer",border:i===d?"1px solid white":`1px solid ${r?S[t]:"#222"}`,opacity:r?1:.6,transform:i===d?"scale(1.15)":"scale(1)",boxShadow:r?`0 0 10px ${S[t]}`:"none",zIndex:i===d?10:1}},i))})]},t))}),s.jsx("p",{style:{marginTop:"20px",color:"#555",fontSize:"0.6rem",letterSpacing:"2px"},children:"AUDIO ENGINE CONNECTED // 44.1KHZ"})]})};export{M as default};
