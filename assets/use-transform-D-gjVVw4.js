import{n as m,o as a,p as d,r as f,M as p,q as h,v as A,k as C,w as i}from"./index-DKzGAutY.js";function V(...t){const n=!Array.isArray(t[0]),e=n?0:-1,o=t[0+e],s=t[1+e],u=t[2+e],c=t[3+e],r=m(s,u,c);return n?r(o):r}function k(t){const n=a(()=>d(t)),{isStatic:e}=f.useContext(p);if(e){const[,o]=f.useState(t);f.useEffect(()=>n.on("change",o),[])}return n}function y(t,n){const e=k(n()),o=()=>e.set(n());return o(),h(()=>{const s=()=>C.preRender(o,!1,!0),u=t.map(c=>c.on("change",s));return()=>{u.forEach(c=>c()),A(o)}}),e}function x(t){i.current=[],t();const n=y(i.current,t);return i.current=void 0,n}function E(t,n,e,o){if(typeof t=="function")return x(t);if(e!==void 0&&!Array.isArray(e)&&typeof n!="function")return M(t,n,e,o);const c=typeof n=="function"?n:V(n,e,o);return Array.isArray(t)?l(t,c):l([t],([r])=>c(r))}function l(t,n){const e=a(()=>[]);return y(t,()=>{e.length=0;const o=t.length;for(let s=0;s<o;s++)e[s]=t[s].get();return n(e)})}function M(t,n,e,o){const s=a(()=>Object.keys(e)),u=a(()=>({}));for(const c of s)u[c]=E(t,n,e[c],o);return u}export{E as a,k as u};
