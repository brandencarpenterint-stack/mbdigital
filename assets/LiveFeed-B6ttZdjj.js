import{r as d,s as h,j as e}from"./index-DKzGAutY.js";import{feedService as y}from"./feed-Brgwye14.js";const j=()=>{const[x,f]=d.useState([{id:1,user:"System",text:"Connecting to Global Feed...",time:"Now",color:"#ffaaaa"}]),[p,g]=d.useState(!1);d.useEffect(()=>{(async()=>{const{data:a}=await h.from("feed_events").select("*").order("created_at",{ascending:!1}).limit(5);if(a&&a.length>0){const t=a.map(s=>({id:s.id,user:s.player_name,text:s.message,time:"Recent",color:s.type==="win"?"gold":s.type==="fail"?"#ff4444":"#00ccff"}));f(t)}else f([{id:"sys-1",user:"SYSTEM",text:"Global Uplink Established.",time:"Now",color:"#00ff00"},{id:"sys-2",user:"SYSTEM",text:"Welcome to the Arcade Zone.",time:"Now",color:"#00ccff"}])})();const c=h.channel("global-feed").on("postgres_changes",{event:"INSERT",schema:"public",table:"feed_events"},a=>{const t=a.new;if(t.player_name==="OPERATOR")return;const s={id:t.id,user:t.player_name,text:t.message,time:"Just now",color:t.type==="win"?"gold":t.type==="fail"?"#ff4444":"#00ccff"};f(l=>l.some(n=>n.id===t.id)?l:[s,...l].slice(0,5))}).subscribe(),i=a=>{const{message:t,type:s,user:l}=a.detail,n={id:Date.now(),user:l||"YOU",text:t,time:"Just now",color:s==="win"?"gold":"#00ffaa"};f(r=>[n,...r].slice(0,5))};return y.addEventListener("feed-message",i),()=>{h.removeChannel(c),y.removeEventListener("feed-message",i)}},[]);const[b,u]=d.useState(null);return d.useEffect(()=>{const o=async()=>{try{let i=0;try{const r=await(await fetch("https://api.mainnet-beta.solana.com",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"getBalance",params:["GQfGtoF7FA3iZfmwmThQrmiZv87zmk6PnqrRFYFsWSHv"]})})).json();r.result&&(i=r.result.value/1e9)}catch{i=145.5}let a=.0045;try{const r=await(await fetch("https://blockchain.info/q/addressbalance/bc1q6dn4yaswgw9gja7pgfnakcf93r74svj5qk82qj")).text();a+=parseInt(r)/1e8}catch{}let t=140,s=65e3;try{const[n,r]=await Promise.all([fetch("https://api.coinbase.com/v2/prices/SOL-USD/spot").then(m=>m.json()),fetch("https://api.coinbase.com/v2/prices/BTC-USD/spot").then(m=>m.json())]);t=parseFloat(n.data.amount),s=parseFloat(r.data.amount)}catch{}const l=i*t+a*s;u(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(l))}catch(i){console.error("Treasury update failed",i),u("$12,450.00")}};o();const c=setInterval(o,6e4);return()=>clearInterval(c)},[]),e.jsxs("div",{className:"glass-panel",style:{width:"100%",maxWidth:"800px",margin:"0 auto 20px auto",padding:p?"5px 20px":"10px 20px",background:"rgba(0,0,0,0.8)",border:"1px solid #333",height:p?"30px":"120px",overflow:"hidden",position:"relative",transition:"height 0.3s ease, padding 0.3s ease"},children:[e.jsx("div",{onClick:()=>g(!p),style:{position:"absolute",bottom:5,right:10,zIndex:10,cursor:"pointer",color:"#666",fontSize:"10px",padding:"2px 5px",border:"1px solid #333",borderRadius:"3px",background:"black"},children:p?"â–¼ EXPAND":"â–² HIDE"}),e.jsxs("div",{style:{position:"absolute",top:5,left:10,fontSize:"0.7rem",color:"#ffd700",display:"flex",alignItems:"center",gap:"5px",fontFamily:"monospace"},children:[e.jsx("span",{children:"ðŸ›ï¸ TREASURY:"}),e.jsx("span",{style:{fontWeight:"bold"},children:b||"Loading..."})]}),e.jsxs("div",{style:{position:"absolute",top:5,right:60,fontSize:"0.7rem",color:"var(--neon-green)",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx("div",{style:{width:6,height:6,background:"var(--neon-green)",borderRadius:"50%",animation:"blink 1s infinite"}}),"LIVE"]}),e.jsx("div",{style:{marginTop:"25px",display:"flex",flexDirection:"column",gap:"8px",opacity:p?0:1,transition:"opacity 0.2s"},children:x.length===0?e.jsxs("div",{style:{marginTop:"10px",textAlign:"center",opacity:.7,color:"var(--neon-green)",fontFamily:"monospace",letterSpacing:"1px",animation:"blink 2s infinite",fontSize:"0.8rem"},children:["// GLOBAL UPLINK ONLINE",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.7rem",color:"#666"},children:"listening for signals..."})]}):x.map((o,c)=>e.jsxs("div",{style:{fontSize:"0.85rem",opacity:1-c*.2,transform:`translateX(${c*5}px)`,transition:"all 0.3s"},children:[e.jsxs("span",{style:{color:"var(--neon-blue)",fontWeight:"bold"},children:["@",o.user]}),": ",e.jsx("span",{style:{color:o.color},children:o.text})]},o.id))}),e.jsx("style",{children:`
                @keyframes blink { 50% { opacity: 0; } }
            `})]})};export{j as L};
