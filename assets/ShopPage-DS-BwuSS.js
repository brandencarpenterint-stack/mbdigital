import{b as F,r as h,j as e,d as $,S as R,a as V,c as Y,e as z,C as q,m as x,A as X,f as _,t as Q,L as J}from"./index-DKzGAutY.js";import{u as M,a as L}from"./use-transform-D-gjVVw4.js";const Z=({onClose:l})=>{const{coins:g,buyCapsule:T,unlockedStickers:v}=F(),[f,y]=h.useState("MACHINE"),[m,r]=h.useState("IDLE"),[o,C]=h.useState(null),k=()=>{g<100||(r("SHAKING"),setTimeout(()=>{const n=T();n?(C(n),r("OPENING"),setTimeout(()=>r("REVEAL"),1e3)):r("IDLE")},1e3))},I=()=>{C(null),r("IDLE")},u=n=>{switch(n){case"legendary":return"#ff00ff";case"epic":return"#a333c8";case"rare":return"#2185d0";default:return"#767676"}};return e.jsxs("div",{style:{position:"fixed",inset:0,zIndex:6e3,background:"rgba(0,0,0,0.9)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsxs("div",{className:"glass-panel",style:{width:"90%",maxWidth:"800px",height:"80vh",border:"2px solid #ffcc00",display:"flex",flexDirection:"column",position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"20px",borderBottom:"1px solid #444"},children:[e.jsx("h2",{style:{margin:0,color:"#ffcc00",fontFamily:'"Press Start 2P"'},children:"GACHA-STATION"}),e.jsxs("div",{style:{display:"flex",gap:"20px"},children:[e.jsx("button",{onClick:()=>y("MACHINE"),style:{background:"none",border:"none",color:f==="MACHINE"?"#fff":"#666",cursor:"pointer",fontWeight:"bold"},children:"PLAY"}),e.jsxs("button",{onClick:()=>y("ALBUM"),style:{background:"none",border:"none",color:f==="ALBUM"?"#fff":"#666",cursor:"pointer",fontWeight:"bold"},children:["ALBUM (",v.length,")"]}),e.jsx("button",{onClick:l,style:{background:"none",border:"none",color:"red",cursor:"pointer"},children:"X"})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",overflowY:"auto",padding:"20px"},children:[f==="ALBUM"&&e.jsx("div",{style:{width:"100%"},children:$.map(n=>{const s=n.items.filter(i=>v.includes(i.id)).length,w=s===n.items.length;return e.jsxs("div",{style:{marginBottom:"30px",background:"rgba(255,255,255,0.05)",padding:"15px",borderRadius:"15px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[e.jsxs("h3",{style:{margin:0,color:w?"gold":"white"},children:[n.name," ",w&&"ðŸ‘‘"]}),e.jsxs("span",{style:{color:"#aaa"},children:[s,"/",n.items.length]})]}),e.jsx("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap"},children:n.items.map(i=>{const d=v.includes(i.id);return e.jsxs("div",{style:{width:"80px",height:"100px",background:d?"rgba(0,0,0,0.3)":"rgba(0,0,0,0.5)",border:`2px solid ${d?u(i.rarity):"#333"}`,borderRadius:"10px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",opacity:d?1:.3,filter:d?"none":"grayscale(100%)"},children:[e.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"5px",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"60px"},children:i.image?e.jsx("img",{src:i.image,style:{maxHeight:"100%",maxWidth:"100%",objectFit:"contain"}}):i.icon}),e.jsx("div",{style:{fontSize:"0.6rem",textAlign:"center",color:"#fff"},children:i.name})]},i.id)})})]},n.id)})}),f==="MACHINE"&&e.jsx("div",{style:{textAlign:"center",position:"relative"},children:m==="REVEAL"&&o?e.jsxs("div",{className:"reveal-anim",style:{animation:"popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)"},children:[e.jsx("div",{style:{position:"relative",background:`radial-gradient(circle, ${u(o.rarity)} 0%, #000 100%)`,padding:"50px",borderRadius:"50%",boxShadow:`0 0 50px ${u(o.rarity)}`,display:"flex",alignItems:"center",justifyContent:"center",width:"200px",height:"200px"},children:e.jsx("div",{style:{fontSize:"6rem",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:o.image?e.jsx("img",{src:o.image,style:{maxHeight:"80%",maxWidth:"80%",objectFit:"contain",filter:"drop-shadow(0 0 20px rgba(255,255,255,0.5))"}}):o.icon})}),e.jsx("h2",{style:{marginTop:"20px",color:"#fff",textShadow:"0 0 10px white"},children:o.name}),e.jsx("div",{style:{color:u(o.rarity),textTransform:"uppercase",fontWeight:"bold",fontSize:"1.2rem",letterSpacing:"5px"},children:o.rarity}),e.jsxs("div",{style:{marginTop:"30px"},children:[e.jsx(R,{onClick:I,style:{marginRight:"10px"},children:"GO AGAIN"}),e.jsx(R,{onClick:()=>y("ALBUM"),style:{background:"#333"},children:"VIEW ALBUM"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"10rem",marginBottom:"20px",animation:m==="SHAKING"?"shake 0.5s infinite":"float 3s infinite ease-in-out"},children:"ðŸ”®"}),m==="SHAKING"||m==="OPENING"?e.jsx("div",{style:{color:"gold",fontSize:"1.5rem",fontWeight:"bold"},children:"DISPENSING..."}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[e.jsxs("div",{style:{background:"#333",padding:"10px 20px",borderRadius:"10px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{color:"#aaa"},children:"BALANCE:"}),e.jsxs("span",{style:{color:"gold",fontWeight:"bold"},children:[g," ðŸª™"]})]}),e.jsx(R,{onClick:k,disabled:g<100,style:{padding:"20px 50px",fontSize:"1.2rem",background:g>=100?"linear-gradient(45deg, #ff00cc, #333399)":"#555",opacity:g>=100?1:.5},children:"INSERT 100 ðŸª™"})]})]})})]})]}),e.jsx("style",{children:`
                @keyframes shake {
                    0% { transform: translate(1px, 1px) rotate(0deg); }
                    10% { transform: translate(-1px, -2px) rotate(-1deg); }
                    20% { transform: translate(-3px, 0px) rotate(1deg); }
                    30% { transform: translate(3px, 2px) rotate(0deg); }
                    40% { transform: translate(1px, -1px) rotate(1deg); }
                    50% { transform: translate(-1px, 2px) rotate(-1deg); }
                    60% { transform: translate(-3px, 1px) rotate(0deg); }
                    70% { transform: translate(3px, 1px) rotate(-1deg); }
                    80% { transform: translate(-1px, -1px) rotate(1deg); }
                    90% { transform: translate(1px, 2px) rotate(0deg); }
                    100% { transform: translate(1px, -2px) rotate(-1deg); }
                }
                @keyframes popIn {
                    0% { transform: scale(0); opacity: 0; }
                    80% { transform: scale(1.1); opacity: 1; }
                    100% { transform: scale(1); opacity: 1; }
                }
            `})]})},b={common:"#a0aec0",rare:"#00bfff",epic:"#d53f8c",legendary:"#ecc94b"},j=l=>l>=5e3?"legendary":l>=2e3?"epic":l>=500?"rare":"common",ne=()=>{const{shopState:l,buyItem:g,equipItem:T,unlockedAchievements:v,coins:f}=F()||{},{unlockDecor:y,stats:m}=V()||{},[r,o]=h.useState("fishing"),[C,k]=h.useState(!1),{playBeep:I,playCollect:u,playBoop:n}=Y(),s=h.useMemo(()=>{const t=z.filter(c=>c.price>=2e3);return t[Math.floor(Math.random()*t.length)]||z[0]},[]),w=h.useMemo(()=>z.filter(t=>t.category===r),[r]),i=M(0),d=M(0),P=L(d,[-.5,.5],["5deg","-5deg"]),D=L(i,[-.5,.5],["-5deg","5deg"]),H=t=>{const c=t.currentTarget.getBoundingClientRect(),A=c.width,N=c.height,a=(t.clientX-c.left)/A-.5,p=(t.clientY-c.top)/N-.5;i.set(a),d.set(p)};return l?e.jsxs("div",{className:"page-enter",style:{minHeight:"100vh",paddingBottom:"120px",background:"radial-gradient(circle at top, #1a202c, #000)",fontFamily:'"Rajdhani", sans-serif'},children:[e.jsxs("header",{style:{position:"sticky",top:0,zIndex:100,background:"rgba(5,5,10,0.9)",backdropFilter:"blur(15px)",borderBottom:"1px solid #333",padding:"15px 0",boxShadow:"0 5px 20px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("h1",{style:{margin:0,fontSize:"1.6rem",color:"white",fontFamily:'"Orbitron", sans-serif',letterSpacing:"2px",textShadow:"0 0 10px #00f2ff"},children:["CYBER ",e.jsx("span",{style:{color:"var(--neon-blue)"},children:"MART"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.5)",border:"1px solid var(--neon-gold)",padding:"8px 18px",borderRadius:"4px",color:"var(--neon-gold)",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 0 10px rgba(255, 215, 0, 0.2)"},children:[e.jsx("span",{children:"ðŸª™"})," ",e.jsx("span",{style:{fontSize:"1.2rem"},children:f.toLocaleString()})]})]}),e.jsx("div",{style:{overflowX:"auto",whiteSpace:"nowrap",padding:"15px 20px",display:"flex",gap:"15px",maxWidth:"1200px",margin:"0 auto",scrollbarWidth:"none"},children:q.map(t=>e.jsxs(x.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>{o(t.id),n(),navigator.vibrate&&navigator.vibrate(10)},style:{padding:"10px 25px",borderRadius:"4px",border:r===t.id?"1px solid var(--neon-blue)":"1px solid #333",background:r===t.id?"rgba(0, 242, 255, 0.1)":"rgba(0,0,0,0.4)",color:r===t.id?"var(--neon-blue)":"#888",fontWeight:"bold",cursor:"pointer",fontSize:"0.9rem",letterSpacing:"1px",fontFamily:'"Orbitron", sans-serif',transition:"all 0.2s",boxShadow:r===t.id?"0 0 15px rgba(0, 242, 255, 0.2)":"none",clipPath:"polygon(10% 0, 100% 0, 100% 80%, 90% 100%, 0 100%, 0 20%)"},children:[e.jsx("span",{style:{marginRight:"8px"},children:t.icon}),t.name.toUpperCase()]},t.id))})]}),e.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs(x.div,{className:"glass-panel",onMouseMove:H,onMouseLeave:()=>{i.set(0),d.set(0)},style:{marginBottom:"40px",padding:"0",background:"radial-gradient(circle at center, #222, #000)",border:`1px solid ${b[j(s.price)]}`,display:"flex",flexWrap:"wrap",overflow:"hidden",perspective:"1000px",transformStyle:"preserve-3d",boxShadow:`0 0 30px ${b[j(s.price)]}20`},children:[e.jsxs("div",{style:{flex:1,padding:"40px",display:"flex",flexDirection:"column",justifyContent:"center",zIndex:10},children:[e.jsx("div",{style:{color:b[j(s.price)],fontWeight:"bold",letterSpacing:"4px",marginBottom:"10px",fontSize:"0.8rem"},children:"// FEATURED ITEM"}),e.jsx("h2",{style:{fontSize:"3.5rem",margin:"0 0 10px 0",color:"white",textShadow:"0 0 20px rgba(255,255,255,0.2)",fontFamily:'"Orbitron", sans-serif'},children:s.name}),e.jsxs("p",{style:{color:"#aaa",fontSize:"1.2rem",marginBottom:"30px",maxWidth:"500px",lineHeight:1.5},children:[s.description," ",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.9rem",color:"#666"},children:"LIMITED STOCK [==============--] 85%"})]}),e.jsx(R,{onClick:()=>{o(s.category),I()},style:{width:"fit-content",background:b[j(s.price)],color:"black",fontFamily:'"Orbitron", sans-serif',fontSize:"1rem",padding:"15px 40px"},children:"VIEW IN STORE ->"})]}),e.jsx(x.div,{style:{width:"350px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10rem",position:"relative",rotateX:P,rotateY:D},children:e.jsx(x.div,{animate:{scale:[1,1.05,1],rotate:[0,2,-2,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},style:{filter:`drop-shadow(0 20px 50px ${b[j(s.price)]}66)`},children:s.icon})})]}),e.jsxs("div",{onClick:()=>k(!0),className:"glass-panel",style:{marginBottom:"40px",padding:"25px",background:"linear-gradient(90deg, #220022 0%, #000 100%)",border:"1px solid #d53f8c",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"inset 0 0 50px #d53f8c22"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"30px"},children:[e.jsx(x.div,{animate:{rotate:360},transition:{duration:20,loop:1/0,ease:"linear"},style:{fontSize:"3rem"},children:"ðŸ”®"}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,color:"#d53f8c",fontSize:"1.8rem",fontFamily:'"Orbitron", sans-serif'},children:"STICKER GACHAPON"}),e.jsx("p",{style:{margin:"5px 0 0 0",color:"#aaa"},children:"Test your luck! Win rare stickers for your Bro Card."})]})]}),e.jsx("div",{style:{color:"#d53f8c",fontWeight:"bold",padding:"10px 20px",border:"2px solid #d53f8c",borderRadius:"4px"},children:"OPEN >"})]}),e.jsx(x.div,{layout:!0,style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"25px"},children:e.jsx(X,{mode:"popLayout",children:w.map(t=>{const c=t.slot||t.category,A=t.category==="homedecor",N=A?m?.unlockedDecor?.includes(t.id):l.unlocked.includes(t.id),a=l.equipped[c]===t.id,p=f>=t.price,O=j(t.price),S=b[O],E=t.unlockCondition,U=E?_.find(K=>K.id===E):null,G=!E||v?.includes(E),W=t.type==="consumable",B=l.inventory?.[t.id]||0;return e.jsxs(x.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"glass-panel",style:{padding:"25px",border:a?"2px solid var(--neon-green)":`1px solid ${S}33`,background:a?"rgba(0, 255, 154, 0.05)":`linear-gradient(180deg, #111 0%, ${S}08 100%)`,display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",clipPath:"polygon(0 0, 100% 0, 100% 90%, 90% 100%, 0 100%)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[e.jsx("div",{style:{fontSize:"0.65rem",color:S,fontWeight:"bold",textTransform:"uppercase",letterSpacing:"2px",border:`1px solid ${S}`,padding:"2px 6px",borderRadius:"4px"},children:O}),a&&e.jsx("div",{style:{background:"var(--neon-green)",color:"black",fontSize:"0.6rem",padding:"2px 8px",borderRadius:"4px",fontWeight:"bold"},children:"EQUIPPED"}),W&&B>0&&e.jsxs("div",{style:{background:"white",color:"black",fontSize:"0.6rem",padding:"2px 8px",borderRadius:"4px",fontWeight:"bold"},children:["STOCK: ",B]})]}),e.jsxs("div",{style:{height:"120px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"4.5rem",marginBottom:"15px",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",width:"100px",height:"100px",borderRadius:"50%",background:S,opacity:.1,filter:"blur(20px)"}}),e.jsx(x.div,{whileHover:{scale:1.1,rotate:[0,-5,5,0]},children:t.icon})]}),e.jsx("h3",{style:{margin:"0 0 5px 0",fontSize:"1.4rem",color:"white",fontFamily:'"Orbitron", sans-serif'},children:t.name}),e.jsx("p",{style:{margin:"0 0 20px 0",fontSize:"0.9rem",color:"#888",flex:1,lineHeight:1.4},children:t.description}),e.jsx("div",{style:{marginTop:"auto"},children:N&&!W?e.jsx("button",{onClick:()=>{T(t.category,t.id),I()},disabled:a,style:{width:"100%",padding:"15px",borderRadius:"4px",background:a?"transparent":"var(--neon-blue)",color:a?"var(--neon-green)":"black",border:a?"1px solid var(--neon-green)":"none",fontWeight:"bold",cursor:a?"default":"pointer",opacity:a?.7:1,fontFamily:'"Orbitron", sans-serif',fontSize:"0.9rem"},children:a?"ACTIVE":"EQUIP"}):G?e.jsxs("button",{onClick:()=>{g(t)&&(u(),Q(),A&&y&&y(t.id))},disabled:!p,style:{width:"100%",padding:"15px",borderRadius:"4px",background:p?"var(--neon-gold)":"#222",color:p?"black":"#555",border:"none",fontWeight:"bold",cursor:p?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",fontFamily:'"Orbitron", sans-serif',fontSize:"0.9rem"},children:[p?"PURCHASE":"INSUFFICIENT FUNDS",p&&e.jsx("span",{style:{background:"rgba(0,0,0,0.2)",padding:"2px 6px",borderRadius:"4px"},children:t.price})]}):e.jsxs("div",{style:{padding:"15px",background:"rgba(255,0,0,0.05)",border:"1px solid rgba(255,0,0,0.4)",borderRadius:"4px",color:"#ff5555",fontSize:"0.8rem",textAlign:"center",fontFamily:'"Rajdhani", sans-serif',fontWeight:"bold",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:["ðŸ”’ ",U?.title?.toUpperCase()||"LOCKED"]})})]},t.id)})})}),e.jsx("div",{style:{textAlign:"center",marginTop:"80px"},children:e.jsx(J,{to:"/arcade",style:{color:"#666",textDecoration:"none",fontSize:"0.8rem",letterSpacing:"2px",fontFamily:'"Orbitron", sans-serif'},children:"â† RETURN TO SECTOR 7 (ARCADE)"})})]}),C&&e.jsx(Z,{onClose:()=>k(!1)})]}):e.jsxs("div",{style:{padding:"50px",color:"white",textAlign:"center"},children:[e.jsx("h1",{style:{fontFamily:'"Orbitron", sans-serif'},children:"LOADING MARKETPLACE..."}),e.jsx("div",{className:"loading-spinner"})]})};export{ne as default};
