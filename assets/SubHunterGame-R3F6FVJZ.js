const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LeaderboardService-Dc5TBcwv.js","assets/index-DKzGAutY.js","assets/index-uvoK_v2f.css"])))=>i.map(i=>d[i]);
import{z as j,r as s,b as I,B as k,x as z,j as o,_ as D}from"./index-DKzGAutY.js";const q=()=>{const u=j(),y=s.useRef(null),{updateStats:p,addCoins:f}=I()||{},{incrementStat:H}=k()||{incrementStat:()=>{}},{soundEnabled:T}=z(),[l,m]=s.useState("start"),[c,g]=s.useState(0),[x,E]=s.useState(parseInt(localStorage.getItem("subHunterHighScore"))||0),a=s.useRef({player:{x:50,y:300,width:60,height:40,dy:0},bullets:[],enemies:[],particles:[],lastEnemyTime:0,score:0,isGameOver:!1,frameCount:0});s.useEffect(()=>{let r;const n=y.current,t=n.getContext("2d"),e=i=>{l==="playing"&&F(i,n),w(t,n),r=requestAnimationFrame(e)};return l!=="start"?r=requestAnimationFrame(e):w(t,n),()=>cancelAnimationFrame(r)},[l]);const b=()=>{a.current={player:{x:50,y:300,width:60,height:40,dy:0},bullets:[],enemies:[],particles:[],lastEnemyTime:0,score:0,isGameOver:!1,frameCount:0},g(0),m("playing")},F=(r,n)=>{const t=a.current;if(t.frameCount++,t.player.y+=t.player.dy,t.player.dy*=.95,t.player.y<0&&(t.player.y=0,t.player.dy=1),t.player.y>n.height-t.player.height&&(t.player.y=n.height-t.player.height,t.player.dy=-1),t.bullets.forEach(e=>e.x+=10),t.bullets=t.bullets.filter(e=>e.x<n.width),r-t.lastEnemyTime>1500){const e=[{char:"N",color:"#E50914"},{char:"S",color:"#1DB954"},{char:"A",color:"#00A8E1"},{char:"H",color:"#1CE783"}],i=e[Math.floor(Math.random()*e.length)];t.enemies.push({x:n.width,y:Math.random()*(n.height-50),width:40,height:40,type:i.char,color:i.color,hp:1}),t.lastEnemyTime=r}t.enemies.forEach(e=>{e.x-=3+t.score/100}),t.bullets.forEach(e=>{t.enemies.forEach(i=>{!e.hit&&!i.dead&&e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y&&(e.hit=!0,i.dead=!0,i.hp--,A(i.x,i.y,i.color),t.score+=10,g(t.score),d("hit"))})}),t.enemies.forEach(e=>{!e.dead&&t.player.x<e.x+e.width&&t.player.x+t.player.width>e.x&&t.player.y<e.y+e.height&&t.player.y+t.player.height>e.y&&C()}),t.enemies=t.enemies.filter(e=>e.x>-50&&!e.dead),t.bullets=t.bullets.filter(e=>!e.hit),t.particles.forEach(e=>{e.x+=e.vx,e.y+=e.vy,e.life-=.05}),t.particles=t.particles.filter(e=>e.life>0)},A=(r,n,t)=>{for(let e=0;e<10;e++)a.current.particles.push({x:r+20,y:n+20,vx:(Math.random()-.5)*5,vy:(Math.random()-.5)*5,life:1,color:t})},C=()=>{a.current.isGameOver=!0,m("gameover"),d("die"),a.current.score>x&&(E(a.current.score),localStorage.setItem("subHunterHighScore",a.current.score),p&&p({subHunterHighScore:a.current.score}));const r=Math.floor(a.current.score/10);f&&r>0&&f(r),D(async()=>{const{leaderboardService:n}=await import("./LeaderboardService-Dc5TBcwv.js");return{leaderboardService:n}},__vite__mapDeps([0,1,2])).then(({leaderboardService:n})=>{n.submitScore("sub_hunter",a.current.score,{difficulty:"normal"})})},d=r=>{if(!T)return;const n=window.AudioContext||window.webkitAudioContext,t=new n,e=t.createOscillator(),i=t.createGain();e.connect(i),i.connect(t.destination),r==="shoot"?(e.frequency.setValueAtTime(400,t.currentTime),e.frequency.exponentialRampToValueAtTime(100,t.currentTime+.1),i.gain.setValueAtTime(.1,t.currentTime),i.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1),e.start(),e.stop(t.currentTime+.1)):r==="hit"?(e.type="square",e.frequency.setValueAtTime(100,t.currentTime),e.frequency.exponentialRampToValueAtTime(50,t.currentTime+.1),i.gain.setValueAtTime(.1,t.currentTime),i.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1),e.start(),e.stop(t.currentTime+.1)):r==="die"&&(e.type="sawtooth",e.frequency.setValueAtTime(100,t.currentTime),e.frequency.exponentialRampToValueAtTime(10,t.currentTime+.5),i.gain.setValueAtTime(.2,t.currentTime),i.gain.exponentialRampToValueAtTime(.01,t.currentTime+.5),e.start(),e.stop(t.currentTime+.5))},w=(r,n)=>{r.fillStyle="#000011",r.fillRect(0,0,n.width,n.height),r.fillStyle="rgba(255, 255, 255, 0.1)";for(let e=0;e<20;e++){const i=(Date.now()/50+e*100)%n.width,R=e*50%n.height;r.beginPath(),r.arc(i,R,e%5+1,0,Math.PI*2),r.fill()}const t=a.current;r.fillStyle="#FFD700",r.beginPath(),r.ellipse(t.player.x+30,t.player.y+20,30,15,0,0,Math.PI*2),r.fill(),r.fillStyle="#00CCFF",r.beginPath(),r.arc(t.player.x+40,t.player.y+15,8,0,Math.PI*2),r.fill(),r.fillStyle="#888",r.fillRect(t.player.x-5,t.player.y+15,5,10),r.fillStyle="#FF4400",t.bullets.forEach(e=>{r.fillRect(e.x,e.y,e.width,e.height)}),t.enemies.forEach(e=>{r.fillStyle=e.color,r.beginPath(),r.roundRect(e.x,e.y,e.width,e.height,5),r.fill(),r.fillStyle="white",r.font="bold 24px Arial",r.textAlign="center",r.textBaseline="middle",r.fillText(e.type,e.x+e.width/2,e.y+e.height/2)}),t.particles.forEach(e=>{r.fillStyle=e.color,r.globalAlpha=e.life,r.beginPath(),r.arc(e.x,e.y,3,0,Math.PI*2),r.fill(),r.globalAlpha=1})},S=r=>{l==="playing"&&(r.code==="ArrowUp"&&(a.current.player.dy=-5),r.code==="ArrowDown"&&(a.current.player.dy=5),r.code==="Space"&&h())},h=()=>{l==="playing"&&(a.current.bullets.push({x:a.current.player.x+50,y:a.current.player.y+15,width:15,height:5,hit:!1}),d("shoot"))},v=r=>{if(r.target.className.includes("fire-btn")){h();return}r.touches[0].clientY<window.innerHeight/2?a.current.player.dy=-5:a.current.player.dy=5};return s.useEffect(()=>(window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)),[l]),o.jsxs("div",{className:"page-enter",style:{height:"100vh",width:"100vw",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[o.jsxs("div",{style:{position:"absolute",top:20,left:20,color:"white",zIndex:10,fontFamily:'"Orbitron", sans-serif',pointerEvents:"none"},children:[o.jsxs("div",{style:{fontSize:"1.5rem",color:"#FFD700",textShadow:"0 0 10px #FFD700"},children:["SCORE: ",c]}),o.jsxs("div",{style:{fontSize:"0.8rem",opacity:.7},children:["HIGH: ",x]})]}),o.jsx("button",{onClick:()=>u("/arcade"),style:{position:"absolute",top:20,right:20,background:"rgba(255,255,255,0.1)",border:"none",color:"white",padding:"8px 15px",borderRadius:"20px",cursor:"pointer",zIndex:10},children:"EXIT"}),o.jsx("canvas",{ref:y,width:800,height:500,onTouchStart:v,style:{border:"2px solid #00CCFF",borderRadius:"10px",maxWidth:"100%",background:"#000011",boxShadow:"0 0 30px #00CCFF"}}),l==="start"&&o.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"white",zIndex:20},children:[o.jsx("h1",{style:{fontFamily:'"Orbitron", sans-serif',fontSize:"3rem",color:"#00CCFF",textShadow:"0 0 20px #00CCFF"},children:"VOID HUNTER"}),o.jsx("p",{children:"Destroy the Subscriptions!"}),o.jsx("p",{children:"Arrow Keys/Tap to Move • Space/Btn to Shoot"}),o.jsx("button",{onClick:b,className:"squishy-btn",style:{marginTop:"20px",background:"#FFD700",border:"none",padding:"15px 40px",fontSize:"1.5rem",fontWeight:"900",color:"black",borderRadius:"50px"},children:"DIVE! ⚓"})]}),l==="gameover"&&o.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"white",zIndex:20,background:"rgba(0,0,0,0.9)",padding:"40px",borderRadius:"20px",border:"1px solid #ff0055"},children:[o.jsx("h1",{style:{fontFamily:'"Orbitron", sans-serif',fontSize:"3rem",color:"#ff0055"},children:"HULL BREACHED"}),o.jsxs("div",{style:{fontSize:"2rem",marginBottom:"20px"},children:["Final Score: ",c]}),o.jsxs("div",{style:{color:"#FFD700",marginBottom:"30px"},children:["+",Math.floor(c/10)," Coins Earned"]}),o.jsxs("div",{style:{display:"flex",gap:"20px",justifyContent:"center"},children:[o.jsx("button",{onClick:b,className:"squishy-btn",style:{background:"#00CCFF",border:"none",padding:"10px 30px",fontSize:"1.2rem",fontWeight:"bold",color:"black",borderRadius:"30px"},children:"REPLAY"}),o.jsx("button",{onClick:()=>u("/arcade"),className:"squishy-btn",style:{background:"transparent",border:"1px solid white",padding:"10px 30px",fontSize:"1.2rem",fontWeight:"bold",color:"white",borderRadius:"30px"},children:"EXIT"})]})]}),l==="playing"&&o.jsx("div",{style:{position:"absolute",bottom:"20px",right:"20px",zIndex:15},children:o.jsx("button",{className:"fire-btn",onClick:h,style:{width:"80px",height:"80px",borderRadius:"50%",background:"rgba(255, 68, 0, 0.5)",border:"2px solid #FF4400",color:"white",fontWeight:"bold",fontSize:"1.2rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"FIRE"})})]})};export{q as default};
