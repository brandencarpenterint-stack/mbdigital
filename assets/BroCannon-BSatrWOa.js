import{d as U,a as W,u as D,r as i,j as t,S as F}from"./index-BGlGTwyI.js";const z=.4,S=.995,$=.15,w=0,X=()=>{const A=U(),{updateStat:q}=W(),{playBoop:E,playCollect:M,playCrash:I,playWin:C}=D(),[o,u]=i.useState("AIM"),[d,k]=i.useState(45),[h,P]=i.useState(0),[x,g]=i.useState(0),[p,b]=i.useState(0),[O,f]=i.useState([]),[Y,L]=i.useState(0),n=i.useRef({x:0,y:0}),s=i.useRef({x:0,y:0}),y=i.useRef(null),m=i.useRef(0);i.useRef(0);const l=i.useRef(1);i.useEffect(()=>{if(o==="AIM"||o==="POWER"){const r=setInterval(()=>{o==="AIM"?k(a=>{let e=a+l.current*1.5;return e>85&&(e=85,l.current=-1),e<5&&(e=5,l.current=1),e}):o==="POWER"&&P(a=>{let e=a+l.current*2;return e>100&&(e=100,l.current=-1),e<0&&(e=0,l.current=1),e})},16);return()=>clearInterval(r)}},[o]);const T=()=>{o==="AIM"?(E(),u("POWER"),l.current=1):o==="POWER"&&G()},G=()=>{C(),u("FLYING");const r=d*Math.PI/180,a=15+h*.4;n.current={x:0,y:10},s.current={x:Math.cos(r)*a,y:Math.sin(r)*a},N(0,1e4),y.current=requestAnimationFrame(v)},N=(r,a)=>{const e=[];for(let c=r;c<a;c+=150)Math.random()<$&&e.push({id:Math.random(),x:c+Math.random()*100,y:Math.random()*800+100,type:Math.random()>.8?"SUPER":"NORMAL"});f(c=>[...c,...e])},v=()=>{if(s.current.x*=S,s.current.y*=S,s.current.y-=z,n.current.x+=s.current.x,n.current.y+=s.current.y,n.current.y<=w)if(n.current.y=w,Math.abs(s.current.y)>2)s.current.y*=-.5,s.current.x*=.8,I();else{j();return}if(f(r=>{const a=[];for(const e of r){const c=e.x-n.current.x,R=e.y-n.current.y;Math.sqrt(c*c+R*R)<60?(M(),e.type==="SUPER"?(s.current.x+=15,s.current.y+=15,L(B=>B+1)):(s.current.x+=5,s.current.y+=10)):e.x>n.current.x-500&&a.push(e)}return a}),n.current.x>m.current+2e3,g(Math.floor(n.current.x)),b(Math.floor(n.current.y)),m.current=n.current.x,Math.abs(s.current.x)<.1&&n.current.y<=1){j();return}y.current=requestAnimationFrame(v)},j=cancelAnimationFrame(y.current);return t.jsxs("div",{style:{width:"100vw",height:"100vh",background:"#87CEEB",overflow:"hidden",position:"relative",touchAction:"none"},onClick:T,children:[t.jsx("div",{style:{position:"absolute",inset:0,background:`linear-gradient(to bottom, #1a1a2e ${Math.min(100,p/10)}%, #87CEEB 100%)`,transition:"background 0.5s"},children:t.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"100px",background:"#4CAF50"}})}),t.jsx("div",{style:{transform:"rotate(0deg)",position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:t.jsxs("div",{style:{position:"absolute",left:0,bottom:0,transform:`translate3d(${-m.current+100}px, ${Math.min(p*.5,0)}px, 0)`,transition:o==="AIM"?"none":"transform 0.1s linear"},children:[t.jsx("div",{style:{position:"absolute",left:-50,bottom:0,width:"100px",height:"100px",background:"#333",transformOrigin:"bottom center",transform:`rotate(${-d}deg)`},children:t.jsx("div",{style:{width:"60px",height:"150px",background:"black",margin:"0 auto",borderRadius:"10px"}})}),(o==="FLYING"||o==="RESULT")&&t.jsx("div",{style:{position:"absolute",left:n.current.x,bottom:n.current.y,fontSize:"40px",transform:`rotate(${x*5}deg)`},children:"ðŸ˜Ž"}),O.map(r=>t.jsx("div",{style:{position:"absolute",left:r.x,bottom:r.y,fontSize:r.type==="SUPER"?"50px":"30px",width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",background:r.type==="SUPER"?"gold":"white",borderRadius:"50%",boxShadow:"0 0 10px white"},children:r.type==="SUPER"?"ðŸš€":"ðŸ’¨"},r.id))]})}),t.jsxs("div",{style:{position:"absolute",top:20,left:20,color:"white",zIndex:10},children:[t.jsxs("h2",{style:{margin:0,textShadow:"2px 2px 0 #000"},children:["DIST: ",x,"m"]}),t.jsxs("h3",{style:{margin:0,textShadow:"2px 2px 0 #000"},children:["ALT: ",p,"m"]})]}),(o==="AIM"||o==="POWER")&&t.jsxs("div",{style:{position:"absolute",bottom:150,left:50,display:"flex",flexDirection:"column",gap:"10px"},children:[t.jsx("div",{style:{width:"200px",height:"20px",background:"#333",border:"2px solid white"},children:t.jsx("div",{style:{width:`${d/90*100}%`,height:"100%",background:"orange"}})}),t.jsxs("div",{style:{color:"white",fontWeight:"bold"},children:["ANGLE: ",Math.floor(d),"Â°"]}),t.jsx("div",{style:{width:"200px",height:"20px",background:"#333",border:"2px solid white"},children:t.jsx("div",{style:{width:`${h}%`,height:"100%",background:"red"}})}),t.jsxs("div",{style:{color:"white",fontWeight:"bold"},children:["POWER: ",Math.floor(h),"%"]}),t.jsx("div",{style:{marginTop:"20px",color:"white",fontSize:"1.5rem",animation:"pulse 0.5s infinite"},children:o==="AIM"?"CLICK TO SET ANGLE":"CLICK TO FIRE!"})]}),t.jsx("button",{onClick:()=>A("/arcade"),style:{position:"absolute",top:20,right:20,padding:"10px",zIndex:20},children:"EXIT"}),o==="RESULT"&&t.jsxs("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.8)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"white",zIndex:30},children:[t.jsxs("h1",{style:{fontSize:"3rem",color:"gold"},children:[x,"m"]}),t.jsx("p",{children:"Distance Traveled"}),t.jsx(F,{onClick:()=>{u("AIM"),g(0),b(0),f([]),n.current={x:0,y:0}},children:"LAUNCH AGAIN"})]})]})};export{X as default};
