import{r as a,u as q,a as B,j as n,L as X,S as K,t as V,f as Y,b as J}from"./index-BGlGTwyI.js";import{G as Z}from"./GameOverCard-Cna3_-75.js";const m=20,Q=150,H=["/assets/snake/face1.png","/assets/snake/face2.png","/assets/snake/face3.png","/assets/snake/face4.png"],ne=()=>{const[c,b]=a.useState([{x:10,y:10}]),[x,v]=a.useState({x:15,y:15}),[r,l]=a.useState("RIGHT"),[h,S]=a.useState(!1),[o,R]=a.useState(0),[u,E]=a.useState(parseInt(localStorage.getItem("snakeHighScore"))||0),[f,k]=a.useState(!1),[g,T]=a.useState(0),{playJump:d,playCrash:z,playCollect:A}=q(),{shopState:p,addCoins:C,updateStat:y,userProfile:G,stats:w,consumeItem:F}=B()||{};a.useEffect(()=>{w?.snakeHighScore>u&&E(w.snakeHighScore)},[w]);const D=a.useRef(),j=a.useRef({x:0,y:0}),I=a.useRef({x:0,y:0}),O=e=>{const t=p?.equipped?.snake||"snake_default";let s={position:"absolute",left:`${c[e].x*5}%`,top:`${c[e].y*5}%`,width:"5%",height:"5%",borderRadius:e===0?"4px":"2px",zIndex:2,boxShadow:"0 0 5px rgba(0,0,0,0.5)"};return t==="snake_gold"?(s.backgroundColor=e===0?"#fff":"#FFD700",s.boxShadow="0 0 10px #FFD700"):t==="snake_rainbow"?(s.backgroundColor=`hsl(${e*20%360}, 100%, 50%)`,s.boxShadow="0 0 5px white"):t==="snake_ghost"?(s.backgroundColor=e===0?"rgba(255, 255, 255, 0.8)":"rgba(255, 255, 255, 0.3)",s.border="1px solid white"):t==="snake_tron"?(s.backgroundColor="#00f3ff",s.boxShadow="0 0 10px #00f3ff, 0 0 20px #00f3ff",s.borderRadius="0px"):(s.backgroundColor=e===0?"#ccffdd":"#00ffaa",s.boxShadow="0 0 5px #00ffaa"),s},N=()=>{if(S(!0),z(),y&&y("gamesPlayed","snake"),o>u){if(E(o),y&&y("snakeHighScore",o),V(),o>50){const e=G?.name||"Player";Y.publish(`slithered to a new High Score: ${o} in Neon Snake üêç`,"win",e)}}else J();C&&C(Math.floor(o/10))},L=()=>{let e,t=0;for(;t<100&&(e={x:Math.floor(Math.random()*m),y:Math.floor(Math.random()*m)},!!c.some(P=>P.x===e.x&&P.y===e.y));)t++;v(e)},_=()=>{if(h||f)return;const e=[...c],t={...e[0]};switch(r){case"UP":t.y-=1;break;case"DOWN":t.y+=1;break;case"LEFT":t.x-=1;break;case"RIGHT":t.x+=1;break}if(t.x<0||t.x>=m||t.y<0||t.y>=m){N();return}if(e.some(s=>s.x===t.x&&s.y===t.y)){N();return}e.unshift(t),t.x===x.x&&t.y===x.y?(R(s=>s+10),T(5),A(),L()):e.pop(),b(e)};a.useEffect(()=>{const e=t=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," "].includes(t.key)&&t.preventDefault(),f){(t.key===" "||t.key==="Enter")&&k(s=>!s);return}switch(t.key){case"ArrowUp":case"w":case"W":r!=="DOWN"&&(l("UP"),d());break;case"ArrowDown":case"s":case"S":r!=="UP"&&(l("DOWN"),d());break;case"ArrowLeft":case"a":case"A":r!=="RIGHT"&&(l("LEFT"),d());break;case"ArrowRight":case"d":case"D":r!=="LEFT"&&(l("RIGHT"),d());break;case" ":k(s=>!s);break}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r,f,d]),a.useEffect(()=>{if(!(h||f))return D.current=setInterval(()=>{_(),g>0&&T(e=>Math.max(0,e-1))},Q-Math.min(o*2,100)),()=>clearInterval(D.current)},[c,r,h,f,o,g]);const W=()=>{b([{x:10,y:10}]),v({x:15,y:15}),l("RIGHT"),R(0),S(!1),k(!1)},i=e=>{r==="UP"&&e==="DOWN"||r==="DOWN"&&e==="UP"||r==="LEFT"&&e==="RIGHT"||r==="RIGHT"&&e==="LEFT"||(l(e),d())},M=e=>{j.current={x:e.touches[0].clientX,y:e.touches[0].clientY}},U=e=>{I.current={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},$()},$=()=>{const e=I.current.x-j.current.x,t=I.current.y-j.current.y;Math.abs(e)>Math.abs(t)?Math.abs(e)>30&&(e>0?i("RIGHT"):i("LEFT")):Math.abs(t)>30&&(t>0?i("DOWN"):i("UP"))};return n.jsxs("div",{className:"page-enter",style:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh",padding:"20px",paddingBottom:"120px",color:"var(--neon-green)",fontFamily:'"Orbitron", sans-serif'},children:[n.jsx("h1",{style:{fontSize:"2.5rem",margin:"0 0 20px 0",textAlign:"center",textShadow:"0 0 20px var(--neon-green)",letterSpacing:"2px"},children:"NEON SNAKE"}),n.jsx(X,{to:"/arcade",style:{position:"absolute",top:"20px",left:"20px",zIndex:100},children:n.jsx(K,{style:{borderRadius:"50px",padding:"10px 20px",fontSize:"1.2rem",background:"rgba(255,255,255,0.1)",backdropFilter:"blur(5px)"},children:"üè† EXIT"})}),n.jsxs("div",{className:"glass-panel",style:{display:"flex",justifyContent:"space-between",width:"100%",maxWidth:"400px",marginBottom:"20px",padding:"15px 25px",fontSize:"1.2rem",border:"1px solid var(--neon-green)",background:"rgba(0, 20, 0, 0.6)"},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[n.jsx("span",{style:{fontSize:"0.7rem",color:"#888"},children:"SCORE"}),n.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:o})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[n.jsx("span",{style:{fontSize:"0.7rem",color:"#888"},children:"HIGH SCORE"}),n.jsx("div",{style:{fontSize:"1.5rem",color:"var(--neon-gold)",textShadow:"0 0 10px var(--neon-gold)"},children:u})]})]}),n.jsxs("div",{style:{position:"relative",width:"100%",maxWidth:"400px",aspectRatio:"1/1",backgroundColor:"rgba(0, 0, 0, 0.9)",border:"2px solid var(--neon-green)",borderRadius:"10px",boxShadow:"0 0 30px rgba(0, 255, 170, 0.3), inset 0 0 50px rgba(0, 255, 170, 0.1)",touchAction:"none",backgroundImage:"linear-gradient(rgba(0, 255, 170, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 255, 170, 0.1) 1px, transparent 1px)",backgroundSize:"20px 20px",overflow:"hidden",transform:`translate(${(Math.random()-.5)*g}px, ${(Math.random()-.5)*g}px)`},onTouchStart:M,onTouchEnd:U,children:[c.map((e,t)=>n.jsx("div",{style:O(t)},`${e.x}-${e.y}`)),n.jsx("div",{style:{position:"absolute",left:`${x.x*5}%`,top:`${x.y*5}%`,width:"5%",height:"5%",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1em"},children:p?.equipped?.snake_food?n.jsx("div",{style:{fontSize:"1.2rem",animation:"pulse 1s infinite alternate",filter:"drop-shadow(0 0 10px rgba(255,255,255,0.5))"},children:p.equipped.snake_food==="food_apple"?"üçé":p.equipped.snake_food==="food_burger"?"üçî":"üç£"}):n.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("img",{src:H[o/10%H.length],alt:"food",style:{width:"120%",height:"120%",objectFit:"contain",filter:"drop-shadow(0 0 5px white)",animation:"pulse 0.5s infinite alternate"}})})}),h&&n.jsx(Z,{score:o,bestScore:u,gameId:"snake",onReplay:W,onHome:()=>window.location.href="/arcade",children:p?.inventory?.snake_life>0&&n.jsxs("button",{onClick:()=>{F("snake_life")&&(S(!1),b([{x:10,y:10}]),l("RIGHT"))},className:"squishy-btn",style:{padding:"15px 30px",fontSize:"1.2rem",background:"#ff0055",color:"white",border:"none",borderRadius:"30px",fontWeight:"900",boxShadow:"0 0 20px #ff0055",display:"flex",alignItems:"center",gap:"5px"},children:["‚ù§Ô∏è REVIVE (",p.inventory.snake_life,")"]})})]}),n.jsxs("div",{style:{marginTop:"30px",display:"grid",gridTemplateColumns:"repeat(3, 70px)",gap:"10px",justifyContent:"center"},children:[n.jsx("div",{}),n.jsx("button",{onPointerDown:()=>i("UP"),className:"glass-panel",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",borderRadius:"15px",background:"rgba(255,255,255,0.05)"},children:"‚¨ÜÔ∏è"}),n.jsx("div",{}),n.jsx("button",{onPointerDown:()=>i("LEFT"),className:"glass-panel",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",borderRadius:"15px",background:"rgba(255,255,255,0.05)"},children:"‚¨ÖÔ∏è"}),n.jsx("button",{onPointerDown:()=>i("DOWN"),className:"glass-panel",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",borderRadius:"15px",background:"rgba(255,255,255,0.05)"},children:"‚¨áÔ∏è"}),n.jsx("button",{onPointerDown:()=>i("RIGHT"),className:"glass-panel",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",borderRadius:"15px",background:"rgba(255,255,255,0.05)"},children:"‚û°Ô∏è"})]}),n.jsxs("div",{style:{marginTop:"30px",textAlign:"center",color:"#555",fontSize:"0.7rem",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx("span",{children:"SWIPE or TAP CONTROLS"}),n.jsx("span",{style:{width:"1px",height:"10px",background:"#333"}}),n.jsx("span",{children:"SPACE TO PAUSE"})]}),n.jsx("style",{children:`
                @keyframes pulse {
                    0% { transform: scale(0.8); opacity: 0.8; }
                    100% { transform: scale(1.2); opacity: 1; }
                }
            `})]})};export{ne as default};
