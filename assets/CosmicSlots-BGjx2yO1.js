import{b as z,c as E,r as d,j as i,S as _,L as $,t as F}from"./index-DKzGAutY.js";import{feedService as Y}from"./feed-Brgwye14.js";const c=[{id:"wild",char:"â­",value:0,weight:1},{id:"cat",img:"/assets/merchboy_cat.png",value:25,weight:3},{id:"bunny",img:"/assets/merchboy_bunny.png",value:25,weight:3},{id:"face",img:"/assets/merchboy_face.png",value:10,weight:4},{id:"money",img:"/assets/merchboy_money.png",value:50,weight:1},{id:"seven",char:"7ï¸âƒ£",value:100,weight:1},{id:"cherry",char:"ðŸ’",value:5,weight:5},{id:"grape",char:"ðŸ‡",value:5,weight:5}],o=()=>{const u=c.reduce((a,g)=>a+g.weight,0);let x=Math.random()*u;for(let a of c){if(x<a.weight)return a;x-=a.weight}return c[0]},S=3,D=3,J=15,U=()=>{const{coins:u,spendCoins:x,addCoins:a,updateStat:g,userProfile:W}=z()||{coins:0,spendCoins:()=>!1,addCoins:()=>{}},{playJump:O,playCollect:P,playWin:A}=E(),[L,w]=d.useState([[o(),o(),o()],[o(),o(),o()],[o(),o(),o()]]),[l,v]=d.useState(!1),[j,k]=d.useState(0),[h,C]=d.useState([]),[m,I]=d.useState(1),y=d.useRef([]);d.useEffect(()=>()=>y.current.forEach(clearInterval),[]);const M=()=>{if(l||!x(J))return;v(!0),k(0),C([]),O();const t=Array(3).fill(null).map(()=>Array(3).fill(null).map(()=>o()));[0,1,2].forEach(s=>{y.current[s]=setInterval(()=>{w(r=>{const n=[...r.map(e=>[...e])];for(let e=0;e<S;e++)n[e][s]=c[Math.floor(Math.random()*c.length)];return n})},50+s*20)}),[0,1,2].forEach(s=>{setTimeout(()=>{clearInterval(y.current[s]),w(r=>{const n=[...r.map(e=>[...e])];for(let e=0;e<S;e++)n[e][s]=t[e][s];return n}),P(),s===2&&N(t)},800+s*400)})},N=t=>{v(!1);let s=0,r=[];const n=(e,p,T,R)=>{const f=[e,p,T].filter(b=>b.id!=="wild");if(f.length===0){s+=500,r.push(R);return}const B=f[0].id;f.every(b=>b.id===B)&&(s+=f[0].value*3,r.push(R))};for(let e=0;e<S;e++)n(t[e][0],t[e][1],t[e][2],`row-${e}`);for(let e=0;e<D;e++)n(t[0][e],t[1][e],t[2][e],`col-${e}`);if(n(t[0][0],t[1][1],t[2][2],"diag-1"),n(t[2][0],t[1][1],t[0][2],"diag-2"),s>0){const e=s*m;if(k(e),C(r),a(e),A(),g&&g("slotsBiggestWin",e),e>=500){const p=W?.name||"Player";Y.publish(`hit a JACKPOT of ${e} Coins! ðŸŽ°`,"win",p)}I(p=>Math.min(p+1,5)),(e>100||r.length>1)&&(navigator.vibrate&&navigator.vibrate([100,50,100,50,100]),F())}else I(1)};return i.jsxs("div",{style:{minHeight:"100vh",background:"radial-gradient(circle, #220033 0%, #000 100%)",color:"white",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[i.jsx("h1",{style:{fontFamily:'"Press Start 2P", display',color:"#ffd700",fontSize:"2.5rem",textShadow:"0 0 20px #ff00ff",margin:0},children:"COSMIC SLOTS"}),i.jsx("p",{style:{color:"#aaa",marginTop:"10px"},children:"SPIN 15 ðŸª™ FOR 8-LINE ACTION!"})]}),i.jsxs("div",{style:{display:"flex",gap:"40px",alignItems:"flex-start",flexWrap:"wrap",justifyContent:"center"},children:[i.jsxs("div",{style:{background:"rgba(0,0,0,0.5)",border:"2px solid #555",borderRadius:"10px",padding:"20px",minWidth:"200px",fontFamily:"monospace"},children:[i.jsx("h3",{style:{color:"#ffd700",borderBottom:"1px solid #555",paddingBottom:"10px"},children:"PAYOUTS (3x)"}),i.jsx("ul",{style:{listStyle:"none",padding:0},children:c.sort((t,s)=>s.value-t.value).map(t=>i.jsxs("li",{style:{display:"flex",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #333"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[t.img?i.jsx("img",{src:t.img,style:{width:"20px"}}):i.jsx("span",{children:t.char}),t.img?i.jsx("img",{src:t.img,style:{width:"20px"}}):i.jsx("span",{children:t.char}),t.img?i.jsx("img",{src:t.img,style:{width:"20px"}}):i.jsx("span",{children:t.char})]}),i.jsx("span",{style:{color:"gold"},children:t.value*3})]},t.id))})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[i.jsxs("div",{style:{background:"#333",padding:"10px 30px",borderRadius:"50px",border:"2px solid gold",fontSize:"1.5rem",boxShadow:"0 0 15px gold"},children:["ðŸª™ ",u]}),i.jsxs("div",{style:{background:"#444",padding:"20px",borderRadius:"20px",border:"8px solid #cc00ff",boxShadow:"0 0 50px #cc00ff40",position:"relative"},children:[i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 100px)",gap:"10px",background:"#000",padding:"10px",borderRadius:"10px",border:"4px solid #222"},children:L.flat().map((t,s)=>{const r=Math.floor(s/3),n=s%3;let e=!1;return h.includes(`row-${r}`)&&(e=!0),h.includes(`col-${n}`)&&(e=!0),h.includes("diag-1")&&(r===0&&n===0||r===1&&n===1||r===2&&n===2)&&(e=!0),h.includes("diag-2")&&(r===2&&n===0||r===1&&n===1||r===0&&n===2)&&(e=!0),i.jsx("div",{style:{height:"100px",background:e?"#ffffcc":"#fff",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3rem",border:e?"4px solid gold":"2px solid #ccc",transition:"background 0.3s"},children:t.img?i.jsx("img",{src:t.img,style:{width:"80%",height:"80%",objectFit:"contain"}}):i.jsx("span",{children:t.char})},s)})}),i.jsx("div",{style:{position:"absolute",top:-15,left:20,width:"20px",height:"20px",background:"red",borderRadius:"50%",boxShadow:"0 0 10px red"},className:"blink"}),i.jsx("div",{style:{position:"absolute",top:-15,right:20,width:"20px",height:"20px",background:"red",borderRadius:"50%",boxShadow:"0 0 10px red"},className:"blink"})]}),i.jsx(_,{onClick:M,disabled:l,style:{padding:"20px 80px",fontSize:"2rem",background:l?"#555":"linear-gradient(to bottom, #ff0055, #cc0000)",color:"white",border:"none",borderRadius:"20px",boxShadow:l?"none":"0 10px 0 #660000",opacity:l?.7:1,transform:l?"translateY(10px)":"none"},children:l?"...":"SPIN"}),m>1&&i.jsxs("div",{style:{position:"absolute",top:"10px",right:"-80px",background:"#ff4500",color:"white",padding:"10px 15px",borderRadius:"10px",fontWeight:"900",fontSize:"1.5rem",transform:"rotate(10deg)",boxShadow:"0 0 15px #ff4500",animation:"pulse 1s infinite"},children:["x",m," ðŸ”¥"]}),j>0&&i.jsxs("div",{style:{fontSize:"2rem",color:"#00ffaa",fontWeight:"bold",textShadow:"0 0 20px #00ffaa"},children:["WIN: ",j," ðŸª™"]})]})]}),i.jsx("style",{children:`
                .blink { animation: blink 1s infinite; }
                @keyframes blink { 50% { opacity: 0.5; } }
                @keyframes pulse { 0% { transform: rotate(10deg) scale(1); } 50% { transform: rotate(10deg) scale(1.1); } 100% { transform: rotate(10deg) scale(1); } }
            `}),i.jsx($,{to:"/arcade",style:{marginTop:"40px",color:"#666"},children:"Back to Arcade"})]})};export{U as default};
